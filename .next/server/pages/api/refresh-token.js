/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/refresh-token";
exports.ids = ["pages/api/refresh-token"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonwebtoken");

/***/ }),

/***/ "(api)/./pages/api/refresh-token.js":
/*!************************************!*\
  !*** ./pages/api/refresh-token.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/response */ \"(api)/./utils/response.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\n\n\nasync function handler(req, res) {\n    if (req.method == \"POST\") {\n        try {\n            const { user_id  } = await jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(req.body.refreshToken, process.env.REFRESH_TOKEN_SECRET_KEY, {\n                algorithms: [\n                    \"HS512\"\n                ]\n            });\n            const accessToken = await jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                user_id\n            }, process.env.ACCESS_TOKEN_SECRET_KEY, {\n                algorithm: \"HS512\",\n                expiresIn: \"300000\"\n            });\n            const refreshToken = await jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                user_id\n            }, process.env.REFRESH_TOKEN_SECRET_KEY, {\n                algorithm: \"HS512\",\n                expiresIn: \"30d\"\n            });\n            return _utils_response__WEBPACK_IMPORTED_MODULE_0__.ok(\"Token refreshed\", {\n                accessToken,\n                refreshToken\n            }, res);\n        } catch (e) {\n            return _utils_response__WEBPACK_IMPORTED_MODULE_0__.unauthorized(\"Sesi telah habis, Silahkan login ulang\", res);\n        }\n    } else {\n        return _utils_response__WEBPACK_IMPORTED_MODULE_0__.notFound(\"wrong route api\", res);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcmVmcmVzaC10b2tlbi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsNkVBQTZFO0FBQ2pDO0FBQ2I7QUFFaEIsZUFBZUUsT0FBTyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM5QyxJQUFJRCxHQUFHLENBQUNFLE1BQU0sSUFBSSxNQUFNLEVBQUU7UUFDeEIsSUFBSTtZQUNGLE1BQU0sRUFBRUMsT0FBTyxHQUFFLEdBQUcsTUFBTUwsMERBQVUsQ0FDbENFLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDQyxZQUFZLEVBQ3JCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msd0JBQXdCLEVBQ3BDO2dCQUNFQyxVQUFVLEVBQUU7b0JBQUMsT0FBTztpQkFBQzthQUN0QixDQUNGO1lBRUQsTUFBTUMsV0FBVyxHQUFHLE1BQU1iLHdEQUFRLENBQ2hDO2dCQUFFSyxPQUFPO2FBQUUsRUFDWEksT0FBTyxDQUFDQyxHQUFHLENBQUNLLHVCQUF1QixFQUNuQztnQkFDRUMsU0FBUyxFQUFFLE9BQU87Z0JBQ2xCQyxTQUFTLEVBQUUsUUFBUTthQUNwQixDQUNGO1lBRUQsTUFBTVQsWUFBWSxHQUFHLE1BQU1SLHdEQUFRLENBQ2pDO2dCQUFFSyxPQUFPO2FBQUUsRUFDWEksT0FBTyxDQUFDQyxHQUFHLENBQUNDLHdCQUF3QixFQUNwQztnQkFDRUssU0FBUyxFQUFFLE9BQU87Z0JBQ2xCQyxTQUFTLEVBQUUsS0FBSzthQUNqQixDQUNGO1lBRUQsT0FBT2xCLCtDQUFXLENBQ2hCLGlCQUFpQixFQUNqQjtnQkFDRWMsV0FBVztnQkFDWEwsWUFBWTthQUNiLEVBQ0RMLEdBQUcsQ0FDSixDQUFDO1NBQ0gsQ0FBQyxPQUFPZ0IsQ0FBQyxFQUFFO1lBQ1YsT0FBT3BCLHlEQUFxQixDQUMxQix3Q0FBd0MsRUFDeENJLEdBQUcsQ0FDSixDQUFDO1NBQ0g7S0FDRixNQUFNO1FBQ0wsT0FBT0oscURBQWlCLENBQUMsaUJBQWlCLEVBQUVJLEdBQUcsQ0FBQyxDQUFDO0tBQ2xEO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ydW5yaWRlLy4vcGFnZXMvYXBpL3JlZnJlc2gtdG9rZW4uanM/NzU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOZXh0LmpzIEFQSSByb3V0ZSBzdXBwb3J0OiBodHRwczovL25leHRqcy5vcmcvZG9jcy9hcGktcm91dGVzL2ludHJvZHVjdGlvblxuaW1wb3J0IHJlc3BvbnNlIGZyb20gXCIuLi8uLi91dGlscy9yZXNwb25zZVwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgPT0gXCJQT1NUXCIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB1c2VyX2lkIH0gPSBhd2FpdCBqd3QudmVyaWZ5KFxuICAgICAgICByZXEuYm9keS5yZWZyZXNoVG9rZW4sXG4gICAgICAgIHByb2Nlc3MuZW52LlJFRlJFU0hfVE9LRU5fU0VDUkVUX0tFWSxcbiAgICAgICAge1xuICAgICAgICAgIGFsZ29yaXRobXM6IFtcIkhTNTEyXCJdLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IGp3dC5zaWduKFxuICAgICAgICB7IHVzZXJfaWQgfSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOX1NFQ1JFVF9LRVksXG4gICAgICAgIHtcbiAgICAgICAgICBhbGdvcml0aG06IFwiSFM1MTJcIixcbiAgICAgICAgICBleHBpcmVzSW46IFwiMzAwMDAwXCIsIC8vIDUgbWludXRlc1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCBqd3Quc2lnbihcbiAgICAgICAgeyB1c2VyX2lkIH0sXG4gICAgICAgIHByb2Nlc3MuZW52LlJFRlJFU0hfVE9LRU5fU0VDUkVUX0tFWSxcbiAgICAgICAge1xuICAgICAgICAgIGFsZ29yaXRobTogXCJIUzUxMlwiLFxuICAgICAgICAgIGV4cGlyZXNJbjogXCIzMGRcIiwgLy8gMzAgaGFyaVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2Uub2soXG4gICAgICAgIFwiVG9rZW4gcmVmcmVzaGVkXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBhY2Nlc3NUb2tlbixcbiAgICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIH0sXG4gICAgICAgIHJlc1xuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UudW5hdXRob3JpemVkKFxuICAgICAgICBcIlNlc2kgdGVsYWggaGFiaXMsIFNpbGFoa2FuIGxvZ2luIHVsYW5nXCIsXG4gICAgICAgIHJlc1xuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLm5vdEZvdW5kKFwid3Jvbmcgcm91dGUgYXBpXCIsIHJlcyk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJyZXNwb25zZSIsImp3dCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJ1c2VyX2lkIiwidmVyaWZ5IiwiYm9keSIsInJlZnJlc2hUb2tlbiIsInByb2Nlc3MiLCJlbnYiLCJSRUZSRVNIX1RPS0VOX1NFQ1JFVF9LRVkiLCJhbGdvcml0aG1zIiwiYWNjZXNzVG9rZW4iLCJzaWduIiwiQUNDRVNTX1RPS0VOX1NFQ1JFVF9LRVkiLCJhbGdvcml0aG0iLCJleHBpcmVzSW4iLCJvayIsImUiLCJ1bmF1dGhvcml6ZWQiLCJub3RGb3VuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/refresh-token.js\n");

/***/ }),

/***/ "(api)/./utils/response.js":
/*!***************************!*\
  !*** ./utils/response.js ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {

eval("exports.ok = (message, payload, res)=>{\n    return res.status(200).json({\n        status: \"success\",\n        message: message,\n        payload: payload\n    });\n};\nexports.badRequest = (message, res)=>{\n    return res.status(400).json({\n        status: \"bad request\",\n        message: message\n    });\n};\nexports.forbidden = (message, res)=>{\n    if (message === null) {\n        message = \"You have no permission to access\";\n    }\n    return res.status(403).json({\n        status: \"forbidden\",\n        message: message\n    });\n};\nexports.notFound = (message, res)=>{\n    return res.status(404).json({\n        status: \"not found\",\n        message: message\n    });\n};\nexports.conflict = (message, res)=>{\n    return res.status(409).json({\n        status: \"conflict\",\n        message: message\n    });\n};\nexports.unauthorized = (message, res)=>{\n    return res.status(401).json({\n        status: \"unauthorized\",\n        message: message\n    });\n};\nexports.error = (code, message, res)=>{\n    return res.status(code || 400).json({\n        status: \"error\",\n        message: message\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9yZXNwb25zZS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQUEsVUFBVSxHQUFHLENBQUNFLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxHQUFHLEdBQUs7SUFDdEMsT0FBT0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkQsTUFBTSxFQUFFLFNBQVM7UUFDakJILE9BQU8sRUFBRUEsT0FBTztRQUNoQkMsT0FBTyxFQUFFQSxPQUFPO0tBQ2pCLENBQUMsQ0FBQztDQUNKLENBQUM7QUFFRkgsa0JBQWtCLEdBQUcsQ0FBQ0UsT0FBTyxFQUFFRSxHQUFHLEdBQUs7SUFDckMsT0FBT0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkQsTUFBTSxFQUFFLGFBQWE7UUFDckJILE9BQU8sRUFBRUEsT0FBTztLQUNqQixDQUFDLENBQUM7Q0FDSixDQUFDO0FBRUZGLGlCQUFpQixHQUFHLENBQUNFLE9BQU8sRUFBRUUsR0FBRyxHQUFLO0lBQ3BDLElBQUlGLE9BQU8sS0FBSyxJQUFJLEVBQUU7UUFDcEJBLE9BQU8sR0FBRyxrQ0FBa0MsQ0FBQztLQUM5QztJQUNELE9BQU9FLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJELE1BQU0sRUFBRSxXQUFXO1FBQ25CSCxPQUFPLEVBQUVBLE9BQU87S0FDakIsQ0FBQyxDQUFDO0NBQ0osQ0FBQztBQUVGRixnQkFBZ0IsR0FBRyxDQUFDRSxPQUFPLEVBQUVFLEdBQUcsR0FBSztJQUNuQyxPQUFPQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCRCxNQUFNLEVBQUUsV0FBVztRQUNuQkgsT0FBTyxFQUFFQSxPQUFPO0tBQ2pCLENBQUMsQ0FBQztDQUNKLENBQUM7QUFFRkYsZ0JBQWdCLEdBQUcsQ0FBQ0UsT0FBTyxFQUFFRSxHQUFHLEdBQUs7SUFDbkMsT0FBT0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkQsTUFBTSxFQUFFLFVBQVU7UUFDbEJILE9BQU8sRUFBRUEsT0FBTztLQUNqQixDQUFDLENBQUM7Q0FDSixDQUFDO0FBRUZGLG9CQUFvQixHQUFHLENBQUNFLE9BQU8sRUFBRUUsR0FBRyxHQUFLO0lBQ3ZDLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJELE1BQU0sRUFBRSxjQUFjO1FBQ3RCSCxPQUFPLEVBQUVBLE9BQU87S0FDakIsQ0FBQyxDQUFDO0NBQ0osQ0FBQztBQUVGRixhQUFhLEdBQUcsQ0FBQ2EsSUFBSSxFQUFFWCxPQUFPLEVBQUVFLEdBQUcsR0FBSztJQUN0QyxPQUFPQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ1EsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDUCxJQUFJLENBQUM7UUFDbENELE1BQU0sRUFBRSxPQUFPO1FBQ2ZILE9BQU8sRUFBRUEsT0FBTztLQUNqQixDQUFDLENBQUM7Q0FDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcnVucmlkZS8uL3V0aWxzL3Jlc3BvbnNlLmpzPzBhMGUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cy5vayA9IChtZXNzYWdlLCBwYXlsb2FkLCByZXMpID0+IHtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgfSk7XG59O1xuXG5leHBvcnRzLmJhZFJlcXVlc3QgPSAobWVzc2FnZSwgcmVzKSA9PiB7XG4gIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgc3RhdHVzOiBcImJhZCByZXF1ZXN0XCIsXG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgfSk7XG59O1xuXG5leHBvcnRzLmZvcmJpZGRlbiA9IChtZXNzYWdlLCByZXMpID0+IHtcbiAgaWYgKG1lc3NhZ2UgPT09IG51bGwpIHtcbiAgICBtZXNzYWdlID0gXCJZb3UgaGF2ZSBubyBwZXJtaXNzaW9uIHRvIGFjY2Vzc1wiO1xuICB9XG4gIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgc3RhdHVzOiBcImZvcmJpZGRlblwiLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gIH0pO1xufTtcblxuZXhwb3J0cy5ub3RGb3VuZCA9IChtZXNzYWdlLCByZXMpID0+IHtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICBzdGF0dXM6IFwibm90IGZvdW5kXCIsXG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgfSk7XG59O1xuXG5leHBvcnRzLmNvbmZsaWN0ID0gKG1lc3NhZ2UsIHJlcykgPT4ge1xuICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgIHN0YXR1czogXCJjb25mbGljdFwiLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gIH0pO1xufTtcblxuZXhwb3J0cy51bmF1dGhvcml6ZWQgPSAobWVzc2FnZSwgcmVzKSA9PiB7XG4gIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgc3RhdHVzOiBcInVuYXV0aG9yaXplZFwiLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gIH0pO1xufTtcblxuZXhwb3J0cy5lcnJvciA9IChjb2RlLCBtZXNzYWdlLCByZXMpID0+IHtcbiAgcmV0dXJuIHJlcy5zdGF0dXMoY29kZSB8fCA0MDApLmpzb24oe1xuICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gIH0pO1xufTtcbiJdLCJuYW1lcyI6WyJleHBvcnRzIiwib2siLCJtZXNzYWdlIiwicGF5bG9hZCIsInJlcyIsInN0YXR1cyIsImpzb24iLCJiYWRSZXF1ZXN0IiwiZm9yYmlkZGVuIiwibm90Rm91bmQiLCJjb25mbGljdCIsInVuYXV0aG9yaXplZCIsImVycm9yIiwiY29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/response.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/refresh-token.js"));
module.exports = __webpack_exports__;

})();